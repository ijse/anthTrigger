<div class="col-lg-12">
    <h1>脚本管理
        <small>创建，编辑 和 执行脚本</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="index.html"><i class="icon-dashboard"></i> Dashboard</a>
        </li>
        <li class="active"><i class="icon-file-alt"></i> Shell list</li>
    </ol>
</div>

<div class="col-lg-12">

	<div class="col-lg-12 well text-right">
		<a class="btn btn-primary" ng-href="/scripts/create">添加脚本</a>
	</div>

    <div class="table-responsive">
        <table class="table table-bordered table-hover tablesorter">
            <thead>
                <tr>
                    <th>脚本名称 </th>
                    <th>创建时间 </th>
                    <th>上次运行时间 </th>
                    <th>操作 </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-if="status.list == 'loading'">
                    <td colspan='4' style="text-align: center">
                        Loading...
                    </td>
                </tr>
                <tr ng-repeat="script in list">
                    <td>
                        <a href ng-click="viewScript(script)">
                            {{script.title}}
                        </a>
                    </td>
                    <td>{{script.createAt}}</td>
                    <td>{{script.lastRunAt}}</td>
                    <td>
                        <a ng-href="/scripts/edit/{{script._id}}" class="btn btn-primary">编辑</a>
                        <a ng-click="deleteScript(script, $index)" class="btn btn-danger">删除</a>
                        <button
                            ng-click="runScript(script, $index)"
                            ng-if="script.status == 'ready'"
                            class="btn btn-success">执行</button>

                        <div class="btn-group" dropdown ng-if="script.status !== 'ready'">
                            <button type="button" disabled class="btn btn-success">
                                运行中
                            </button>
                            <button type="button"
                                class="btn btn-success dropdown-toggle">
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a href ng-click="killScript(script, $index)">
                                    <i class="fa fa-times"></i> Kill
                                    </a>
                                </li>
                            </ul>
                        </div>

                    </td>
                </tr>
            </tbody>
        </table>

        <div class="text-center">
            <pagination
                ng-model="page"
                total-items="totalItems"
                items-per-page="pageSize"
                ng-change="pageChange()"></pagination>
        </div>

    </div>

</div>
